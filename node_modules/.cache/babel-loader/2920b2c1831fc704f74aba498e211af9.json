{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\edgar\\\\Documents\\\\map-manado\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport { Row, Col, Container, Card, CardBody, Button } from 'reactstrap';\nimport ModalWindow from './components/Modal';\nimport GeoMan from 'geoman-client';\nimport axios from 'axios';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport BasemapToggle from './components/BasemapToggle';\nimport FloatWindow from './components/FloatWindow';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      geo: {},\n      basemaps: [],\n      type: '',\n      data: {},\n      style: 'LIGHT',\n      styles: [],\n      districts: [],\n      subdistricts: [],\n      neighbors: [],\n      district: '',\n      subdistrict: '',\n      neighbor: '',\n      activeBasemaps: [],\n      sidebar: false\n    };\n\n    this.showBaseMap = zoom => {\n      let _this$state = this.state,\n          basemaps = _this$state.basemaps,\n          activeBasemaps = _this$state.activeBasemaps;\n      activeBasemaps = activeBasemaps.filter(a => a !== 'Jalan');\n      activeBasemaps = activeBasemaps.filter(a => a !== 'Bangunan');\n      activeBasemaps = activeBasemaps.filter(a => a !== 'Sungai');\n      basemaps.map(b => {\n        if (b.name === 'Bangunan' && zoom > 15) {\n          b.show();\n          if (activeBasemaps.findIndex(x => x === 'Bangunan') === -1) activeBasemaps.push('Bangunan');\n          this.setState({\n            activeBasemaps\n          });\n        } else if (b.name === 'Sungai' && zoom > 14) {\n          b.show();\n          if (activeBasemaps.findIndex(x => x === 'Sungai') === -1) activeBasemaps.push('Sungai');\n          this.setState({\n            activeBasemaps\n          });\n        } else {\n          if (zoom < 16 && zoom > 15) {\n            const a = activeBasemaps.filter(b => b !== 'Bangunan');\n            this.setState({\n              activeBasemaps: a\n            });\n          }\n\n          if (zoom < 14.25 && zoom > 14) {\n            const a = activeBasemaps.filter(b => b !== 'Jalan');\n            this.setState({\n              activeBasemaps: a\n            });\n          }\n\n          if (zoom < 14 && zoom > 13) {\n            const a = activeBasemaps.filter(b => b !== 'Sungai');\n            this.setState({\n              activeBasemaps: a\n            });\n          }\n\n          if (b.name === 'Sungai' || b.name === 'Jalan' || b.name === 'Bangunan') {\n            b.hide();\n          }\n        }\n\n        if (b.name === 'Jalan' && zoom > 14.25) {\n          b.show();\n          if (activeBasemaps.findIndex(x => x === 'Jalan') === -1) activeBasemaps.push('Jalan');\n          this.setState({\n            activeBasemaps\n          });\n        }\n      });\n    };\n\n    this.getDistricts = async () => {\n      const geo = this.state.geo;\n      const districts = await geo.getDistricts();\n      this.setState({\n        districts\n      });\n    };\n\n    this.getSubdistricts = async d => {\n      const subdistricts = await d.getSubdistricts();\n      this.setState({\n        subdistricts\n      });\n    };\n\n    this.getNeighbors = async n => {\n      const neighbors = await n.getNeighbors();\n      this.setState({\n        neighbors\n      });\n    };\n\n    this.ping = () => {\n      axios.get('http://10.71.71.24:8080/api/index.php/citizens/ping').then(resp => {\n        console.log(resp);\n      });\n    };\n\n    this.getBasemaps = async () => {\n      const geo = this.state.geo;\n      const z = geo.map.getZoom();\n      this.showBaseMap(z);\n      const basemaps = await geo.getBasemaps();\n      this.setState({\n        basemaps,\n        activeBasemaps: ['Jalan', 'Sungai']\n      });\n      basemaps.map(b => {\n        if (b.name === 'Jalan' || b.name === 'Sungai') {\n          b.show();\n        }\n      });\n      this.getDistricts();\n    };\n\n    this.click = (e, bmap) => {\n      if (e.target.checked) {\n        bmap.show();\n      } else {\n        bmap.hide();\n      }\n\n      bmap.color = 'red';\n    };\n\n    this.clearData = () => {\n      this.setState({\n        type: '',\n        data: {}\n      });\n    };\n  }\n\n  componentDidMount() {\n    let _this$state2 = this.state,\n        geo = _this$state2.geo,\n        styles = _this$state2.styles,\n        style = _this$state2.style; // eslint-disable-next-line no-undef\n\n    geo = new GeoMan('http://10.71.71.198', 8080, {\n      container: 'App',\n      center: [124.842624, 1.4794296],\n      zoom: 15\n    }, GeoMan.Styles[style]);\n    styles = Object.keys(GeoMan.Styles);\n    this.setState({\n      geo,\n      styles\n    }, this.getBasemaps);\n    geo.setRegionLabelEvent('click', 'district', ev => {\n      this.ping();\n      this.setState({\n        district: '',\n        subdistrict: '',\n        subdistricts: [],\n        neighbors: [],\n        neighbor: ''\n      });\n      const districts = this.state.districts;\n      const data = ev.properties;\n      districts.forEach(d => {\n        if (d.name === data.name) {\n          this.setState({\n            district: d.id\n          });\n          d.focus();\n        }\n      });\n      this.setState({\n        type: 'kec',\n        data\n      });\n    });\n    geo.setRegionLabelEvent('click', 'subdistrict', ev => {\n      this.ping();\n      this.setState({\n        district: '',\n        subdistrict: '',\n        subdistricts: [],\n        neighbors: [],\n        neighbor: ''\n      });\n      const districts = this.state.districts;\n      const data = ev.properties;\n      districts.forEach(async d => {\n        if (d.name === data.district) {\n          let subdistricts = await d.getSubdistricts();\n          this.setState({\n            district: data.district_id,\n            subdistrict: data.id,\n            subdistricts\n          });\n          subdistricts = subdistricts.filter(s => s.name === data.name)[0];\n          subdistricts.focus();\n        }\n      });\n      this.setState({\n        type: 'kel',\n        data: ev.properties\n      });\n    });\n    geo.setRegionLabelEvent('click', 'neighbor', ev => {\n      this.ping();\n      this.setState({\n        district: '',\n        subdistrict: '',\n        subdistricts: [],\n        neighbors: [],\n        neighbor: ''\n      });\n      const districts = this.state.districts;\n      const data = ev.properties;\n      districts.forEach(async d => {\n        if (d.name === data.district) {\n          let subdistricts = await d.getSubdistricts();\n          let subdistrict = subdistricts.filter(s => s.name === data.subdistrict)[0];\n          let neighbors = await subdistrict.getNeighbors();\n          let neighbor = neighbors.filter(n => n.name === data.name)[0];\n          neighbor.focus();\n          this.setState({\n            district: data.district_id,\n            subdistrict: data.id,\n            subdistricts,\n            neighbor: neighbor.id,\n            neighbors\n          });\n        }\n      });\n      this.setState({\n        type: 'rw',\n        data: ev.properties\n      });\n    });\n    geo.map.on('zoom', e => {\n      const zoom = e.target.getZoom();\n      this.showBaseMap(zoom);\n    });\n    this.ping();\n  }\n\n  render() {\n    document.title = \"Manado Map\";\n    const _this$state3 = this.state,\n          district = _this$state3.district,\n          neighbor = _this$state3.neighbor,\n          subdistrict = _this$state3.subdistrict,\n          basemaps = _this$state3.basemaps,\n          activeBasemaps = _this$state3.activeBasemaps;\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(BasemapToggle, {\n      updateBasemaps: activeBasemaps => this.setState({\n        activeBasemaps\n      }),\n      activeBasemaps: activeBasemaps,\n      basemaps: basemaps,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: require('./components/logo.png'),\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"App\",\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100vw',\n        height: '100vh'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }), this.state.type.length > 0 && Object.keys(this.state.data).length > 0 && React.createElement(FloatWindow, {\n      onClick: this.clearData,\n      data: this.state.data,\n      type: this.state.type,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), React.createElement(Container, {\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"justify-content-end text-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, !this.state.sidebar && React.createElement(Col, {\n      md: \"3\",\n      className: \"text-right p-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"dark\",\n      size: \"sm\",\n      onClick: () => this.setState({\n        sidebar: true\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Sidebar\")), this.state.sidebar && React.createElement(Col, {\n      md: \"3\",\n      className: \"vh-100\",\n      style: {\n        background: 'rgba(0,0,0,0.8)',\n        backdropFilter: 'blur(10px)',\n        overflow: 'auto',\n        height: '100vh'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"text-left my-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(Button, {\n      size: \"sm\",\n      className: \"rounded p-1 d-block\",\n      onClick: () => this.setState({\n        sidebar: false\n      }),\n      color: \"danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"Tutup\")), React.createElement(\"label\", {\n      htmlFor: \"\",\n      className: \"control-label my-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, \"Style Map\"), React.createElement(\"select\", {\n      id: \"\",\n      value: this.state.style,\n      onChange: e => {\n        this.setState({\n          style: e.target.value\n        }, async () => {\n          await this.state.geo.setStyle(GeoMan.Styles[this.state.style]);\n          const z = this.state.geo.map.getZoom();\n          setTimeout(() => this.showBaseMap(z), 500);\n        });\n      },\n      className: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, this.state.styles.map((style, i) => React.createElement(\"option\", {\n      key: i,\n      value: style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, style))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }), React.createElement(Button, {\n      color: \"light\",\n      size: \"sm\",\n      onClick: () => {\n        this.setState({\n          district: '',\n          subdistrict: '',\n          neighbor: '',\n          neighbors: [],\n          subdistricts: []\n        }, () => this.state.geo.clearFocuses());\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, \"Manado\"), this.state.subdistricts.length === 0 && this.state.districts.map(d => React.createElement(Card, {\n      onClick: () => {\n        this.setState({\n          district: d.id\n        });\n        d.focus();\n      },\n      onDoubleClick: () => this.getSubdistricts(d),\n      className: district === d.id ? \"bg-primary text-left my-2 shadow-sm\" : \"bg-dark text-left my-2 shadow-sm\",\n      key: d.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(CardBody, {\n      className: \"p-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, d.name))), this.state.neighbors.length === 0 && React.createElement(React.Fragment, null, this.state.subdistricts.length > 0 && React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"light\",\n      size: \"sm\",\n      onClick: () => {\n        this.setState({\n          district: ''\n        }, () => this.state.geo.clearFocuses()); // this.state.subdistricts[0].district.focus()\n\n        this.setState({\n          subdistricts: [],\n          subdistrict: ''\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, \"Kembali\"), React.createElement(\"p\", {\n      className: \"m-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, this.state.subdistricts[0].district.name)), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }), this.state.subdistricts.map(d => React.createElement(Card, {\n      onClick: () => {\n        this.setState({\n          subdistrict: d.id\n        });\n        d.focus();\n      },\n      onDoubleClick: () => this.getNeighbors(d),\n      className: subdistrict === d.id ? \"bg-primary text-left my-2 shadow-sm\" : \"bg-dark text-left my-2 shadow-sm\",\n      key: d.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(CardBody, {\n      className: \"p-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, d.name))))), this.state.neighbors.length > 0 && React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"light\",\n      size: \"sm\",\n      onClick: () => {\n        this.state.neighbors[0].subdistrict.focus();\n        this.setState({\n          neighbors: [],\n          neighbor: ''\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, \"Kembali\"), React.createElement(\"p\", {\n      className: \"small m-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, \"Kel. \", this.state.neighbors[0].subdistrict.name)), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }), this.state.neighbors.map(d => React.createElement(Card, {\n      onClick: () => {\n        this.setState({\n          neighbor: d.id\n        });\n        d.focus();\n      },\n      className: neighbor === d.id ? \"bg-primary text-left my-2 shadow-sm\" : \"bg-dark text-left my-2 shadow-sm\",\n      key: d.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(CardBody, {\n      className: \"p-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, d.name))))))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/edgar/Documents/map-manado/src/App.js"],"names":["React","Component","Row","Col","Container","Card","CardBody","Button","ModalWindow","GeoMan","axios","BasemapToggle","FloatWindow","App","state","geo","basemaps","type","data","style","styles","districts","subdistricts","neighbors","district","subdistrict","neighbor","activeBasemaps","sidebar","showBaseMap","zoom","filter","a","map","b","name","show","findIndex","x","push","setState","hide","getDistricts","getSubdistricts","d","getNeighbors","n","ping","get","then","resp","console","log","getBasemaps","z","getZoom","click","e","bmap","target","checked","color","clearData","componentDidMount","container","center","Styles","Object","keys","setRegionLabelEvent","ev","properties","forEach","id","focus","district_id","s","on","render","document","title","require","position","top","left","width","height","length","background","backdropFilter","overflow","value","setStyle","setTimeout","i","clearFocuses"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Row, Col, Container, Card, CardBody, Button } from 'reactstrap';\nimport ModalWindow from './components/Modal';\nimport GeoMan from 'geoman-client';\nimport axios from 'axios';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport BasemapToggle from './components/BasemapToggle';\nimport FloatWindow from './components/FloatWindow';\n\nclass App extends Component {\n  state = {\n    geo: {},\n    basemaps: [],\n    type: '',\n    data: {\n\n    },\n    style: 'LIGHT',\n    styles: [],\n    districts: [],\n    subdistricts: [],\n    neighbors: [],\n    district: '',\n    subdistrict: '',\n    neighbor: '',\n    activeBasemaps: [],\n    sidebar: false\n  }\n\n  componentDidMount() {\n    let { geo, styles, style } = this.state;\n    // eslint-disable-next-line no-undef\n    geo = new GeoMan('http://10.71.71.198', 8080, {\n      container: 'App',\n      center: [\n        124.842624,\n        1.4794296\n      ],\n      zoom: 15\n    },\n      GeoMan.Styles[style]\n    )\n    styles = Object.keys(GeoMan.Styles);\n    this.setState({ geo, styles }, this.getBasemaps);\n    geo.setRegionLabelEvent('click', 'district', ev => {\n      this.ping();\n      this.setState({ district : '', subdistrict : '', subdistricts : [], neighbors : [], neighbor : '' });\n      const {districts} = this.state;\n      const {properties:data} = ev;\n      districts.forEach(d => {\n        if (d.name === data.name) {\n          this.setState({ district : d.id })\n          d.focus()\n        }\n      })\n      this.setState({ type: 'kec', data })\n    })\n    geo.setRegionLabelEvent('click', 'subdistrict', ev => {\n      this.ping();\n      this.setState({ district : '', subdistrict : '', subdistricts : [], neighbors : [], neighbor : '' });\n      const {districts} = this.state;\n      const {properties:data} = ev;\n      districts.forEach(async d => {\n        if (d.name === data.district) {\n          let subdistricts = await d.getSubdistricts()\n          this.setState({ district : data.district_id, subdistrict : data.id, subdistricts })\n          subdistricts = subdistricts.filter(s => s.name === data.name)[0]\n          subdistricts.focus()\n        }\n      })\n      this.setState({ type: 'kel', data: ev.properties })\n    })\n    geo.setRegionLabelEvent('click', 'neighbor', ev => {\n      this.ping();\n      this.setState({ district : '', subdistrict : '', subdistricts : [], neighbors : [], neighbor : '' });\n      const {districts} = this.state;\n      const {properties:data} = ev;\n      districts.forEach(async d => {\n        if (d.name === data.district) {\n          let subdistricts = await d.getSubdistricts()\n          let subdistrict = subdistricts.filter(s => s.name === data.subdistrict)[0]\n          let neighbors = await subdistrict.getNeighbors()\n          let neighbor = neighbors.filter(n => n.name === data.name)[0]\n          neighbor.focus()\n          this.setState({ district : data.district_id, subdistrict : data.id, subdistricts, neighbor : neighbor.id, neighbors })\n        }\n      })\n      this.setState({ type: 'rw', data: ev.properties })\n    })\n    geo.map.on('zoom', e => {\n      const zoom = e.target.getZoom();\n      this.showBaseMap(zoom)\n    })\n    this.ping();\n  }\n\n  showBaseMap = zoom => {\n    let { basemaps, activeBasemaps } = this.state;\n    activeBasemaps = activeBasemaps.filter(a => a !== 'Jalan');\n    activeBasemaps = activeBasemaps.filter(a => a !== 'Bangunan');\n    activeBasemaps = activeBasemaps.filter(a => a !== 'Sungai');\n    basemaps.map(b => {      \n      if (b.name === 'Bangunan' && zoom > 15) {\n        b.show()\n        if (activeBasemaps.findIndex(x => x === 'Bangunan') === -1) activeBasemaps.push('Bangunan');\n        this.setState({ activeBasemaps });\n      } else if (b.name === 'Sungai' && zoom > 14) {\n        b.show()\n        if (activeBasemaps.findIndex(x => x === 'Sungai') === -1) activeBasemaps.push('Sungai');\n        this.setState({ activeBasemaps });\n      } else {\n        if (zoom < 16 && zoom > 15) {\n          const a = activeBasemaps.filter(b => b !== 'Bangunan');\n          this.setState({ activeBasemaps: a });\n        }\n\n        if (zoom < 14.25 && zoom > 14) {\n          const a = activeBasemaps.filter(b => b !== 'Jalan');\n          this.setState({ activeBasemaps: a });\n        }\n\n        if (zoom < 14 && zoom > 13) {\n          const a = activeBasemaps.filter(b => b !== 'Sungai');\n          this.setState({ activeBasemaps: a });\n        }\n\n        if (b.name === 'Sungai' || b.name === 'Jalan' || b.name === 'Bangunan') {\n          b.hide()\n        }\n      }\n            \n\n      if (b.name === 'Jalan' && zoom > 14.25) {\n        b.show()\n        if (activeBasemaps.findIndex(x => x === 'Jalan') === -1) activeBasemaps.push('Jalan');\n        this.setState({ activeBasemaps });\n      }\n    })\n  }\n\n  getDistricts = async () => {\n    const { geo } = this.state;\n    const districts = await geo.getDistricts();\n    this.setState({ districts });\n  }\n\n  getSubdistricts = async d => {\n    const subdistricts = await d.getSubdistricts();\n    this.setState({ subdistricts })\n  }\n\n  getNeighbors = async n => {\n    const neighbors = await n.getNeighbors();\n    this.setState({ neighbors })\n  }\n\n  ping = () => {\n    axios.get('http://10.71.71.24:8080/api/index.php/citizens/ping').then(resp => {\n      console.log(resp);\n    })\n  }\n\n  getBasemaps = async () => {\n    const { geo } = this.state;\n    const z = geo.map.getZoom()\n    this.showBaseMap(z)\n    const basemaps = await geo.getBasemaps();\n    this.setState({ basemaps, activeBasemaps: ['Jalan', 'Sungai'] })\n    basemaps.map(b => {\n      if (b.name === 'Jalan' || b.name === 'Sungai') {\n        b.show()\n      }\n    })\n    this.getDistricts();\n  }\n\n  click = (e, bmap) => {\n    if (e.target.checked) {\n      bmap.show();\n    } else {\n      bmap.hide();\n    }\n    bmap.color = 'red'\n  }\n\n  clearData = () => {\n    this.setState({ type: '', data: {} });\n  }\n\n  render() {\n    document.title = \"Manado Map\"\n    const { district, neighbor, subdistrict, basemaps, activeBasemaps } = this.state;\n    return (\n      <div className=\"App\">\n        <BasemapToggle updateBasemaps={activeBasemaps => this.setState({ activeBasemaps })} activeBasemaps={activeBasemaps} basemaps={basemaps} />\n        <div className=\"logo\">\n          <img src={require('./components/logo.png')} alt=\"\" />\n        </div>\n        <div id=\"App\" style={{ position: 'absolute', top: 0, left: 0, width: '100vw', height: '100vh' }}></div>\n        {this.state.type.length > 0 && Object.keys(this.state.data).length > 0 && <FloatWindow onClick={this.clearData} data={this.state.data} type={this.state.type} />}\n        <Container fluid>\n          <Row className=\"justify-content-end text-light\">\n            {!this.state.sidebar &&\n              <Col md=\"3\" className=\"text-right p-2\">\n                <Button color=\"dark\" size=\"sm\" onClick={() => this.setState({ sidebar: true })}>Sidebar</Button>\n              </Col>\n            }\n            {this.state.sidebar && <Col md=\"3\" className=\"vh-100\" style={{ background: 'rgba(0,0,0,0.8)', backdropFilter: 'blur(10px)', overflow: 'auto', height: '100vh' }}>\n              {/* <ul className=\"text-left\">\n                {this.state.basemaps.map(bmap => (<li key={bmap.id}>\n                  <input type=\"checkbox\" onClick={(e) => this.click(e, bmap)} id=\"\" />&nbsp;\n                  {bmap.name}\n                </li>))}\n              </ul>\n              <hr /> */}\n              <div className=\"text-left my-2\">\n                <Button size=\"sm\" className=\"rounded p-1 d-block\" onClick={() => this.setState({ sidebar: false })} color=\"danger\">Tutup</Button>\n              </div>\n              <label htmlFor=\"\" className=\"control-label my-2\">Style Map</label>\n              <select id=\"\" value={this.state.style} onChange={e => {\n                this.setState({ style: e.target.value }, async () => {\n                  await this.state.geo.setStyle(GeoMan.Styles[this.state.style])\n                  const z = this.state.geo.map.getZoom();\n                  setTimeout(() => this.showBaseMap(z), 500)\n                })\n              }} className=\"form-control\">\n                {this.state.styles.map((style, i) => (\n                  <option key={i} value={style}>{style}</option>\n                ))}\n              </select>\n              <hr />\n              <Button color=\"light\" size=\"sm\" onClick={() => {\n                this.setState({ district : '', subdistrict : '', neighbor : '', neighbors: [], subdistricts : [] }, () => this.state.geo.clearFocuses());\n              }}>Manado</Button>\n              {this.state.subdistricts.length === 0 && this.state.districts.map(d => (<Card onClick={() => {\n                this.setState({ district: d.id })\n                d.focus()\n              }} onDoubleClick={() => this.getSubdistricts(d)}\n                className={district === d.id ? \"bg-primary text-left my-2 shadow-sm\" : \"bg-dark text-left my-2 shadow-sm\"} key={d.id}>\n                <CardBody className=\"p-2\">\n                  {d.name}\n                </CardBody>\n              </Card>))}\n              {this.state.neighbors.length === 0 &&\n                <>\n                  {this.state.subdistricts.length > 0 &&\n                    <>\n                      <div className=\"d-flex justify-content-between align-items-center\">\n                        <Button color=\"light\" size=\"sm\" onClick={() => {\n                          this.setState({ district: '' }, () => this.state.geo.clearFocuses());\n                          // this.state.subdistricts[0].district.focus()\n                          this.setState({ subdistricts: [], subdistrict: '' })\n                        }}>Kembali</Button>\n                        <p className=\"m-0\">{this.state.subdistricts[0].district.name}</p>\n                      </div>\n                      <hr />\n                      {this.state.subdistricts.map(d => (<Card onClick={() => {\n                        this.setState({ subdistrict: d.id })\n                        d.focus()\n                      }} onDoubleClick={() => this.getNeighbors(d)}\n                        className={subdistrict === d.id ? \"bg-primary text-left my-2 shadow-sm\" : \"bg-dark text-left my-2 shadow-sm\"} key={d.id}>\n                        <CardBody className=\"p-2\">\n                          {d.name}\n                        </CardBody>\n                      </Card>))}\n                    </>\n                  }\n                </>\n              }\n              {this.state.neighbors.length > 0 &&\n                <>\n                  <div className=\"d-flex justify-content-between align-items-center\">\n                    <Button color=\"light\" size=\"sm\" onClick={() => {\n                      this.state.neighbors[0].subdistrict.focus()\n                      this.setState({ neighbors: [], neighbor: '' })\n                    }}>Kembali</Button>\n                    <p className=\"small m-0\">Kel. {this.state.neighbors[0].subdistrict.name}</p>\n                  </div>\n                  <hr />\n                  {this.state.neighbors.map(d => (<Card onClick={() => {\n                    this.setState({ neighbor: d.id })\n                    d.focus()\n                  }} className={neighbor === d.id ? \"bg-primary text-left my-2 shadow-sm\" : \"bg-dark text-left my-2 shadow-sm\"} key={d.id}>\n                    <CardBody className=\"p-2\">\n                      {d.name}\n                    </CardBody>\n                  </Card>))}\n                </>\n              }\n            </Col>}\n          </Row>\n        </Container>\n        {/* {\n          this.state.type.length > 0 && Object.keys(this.state.data).length > 0 &&\n          <ModalWindow type={this.state.type} onClick={this.clearData} data={this.state.data} />\n        } */}\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}